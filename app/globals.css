@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ===== Base Vivaah Palette (kept safe, slightly enriched) ===== */
:root {
  --cream-bg: #f6f2e9; /* warmer, richer cream vs old dull beige */
  --cream-bg-2: #fbf9f4;
  --text-maroon: #5a2424; /* slightly deeper for readability */
  --gold-1: #c89a4b;      /* richer gold */
  --gold-2: #d7ae60;

  --background: var(--cream-bg);
  --foreground: var(--text-maroon);

  --card: var(--cream-bg-2);
  --card-foreground: var(--text-maroon);

  --primary: var(--gold-1);
  --primary-foreground: #fff;

  --secondary: #f7f2e9;
  --secondary-foreground: var(--text-maroon);

  --muted: #ece7db;
  --muted-foreground: #7a5a5a;

  --border: #e0d3b8;
  --input: #e5decf;
  --ring: var(--gold-1);

  --radius: 0.75rem;
}

/* ===== Background ===== */
body {
  background: var(--cream-bg);
  background-image: radial-gradient(
      rgba(200, 150, 60, 0.04) 1px,
      transparent 2px
    ),
    url("/subtle-mandala.png");
  background-size: 22px 22px, 620px;
  background-position: center, top right;
  background-repeat: repeat, no-repeat;
  color: var(--text-maroon);
}

/* ===== Header ===== */
.chat-header {
  border-bottom: 2px solid var(--gold-1);
  background: var(--cream-bg);
  backdrop-filter: blur(4px);
}

/* Avatar ring subtle enhancement */
.avatar-ring {
  box-shadow: 0 2px 8px rgba(200,150,60,0.12);
  border-radius: 9999px;
}

/* ===== Chat Bubbles ===== */
.message-user {
  background: #fffdfa;
  border: 1px solid var(--gold-1);
  border-radius: 16px;
  padding: 12px 16px;
  margin: 6px 0;
  box-shadow: 0 1px 6px rgba(0,0,0,0.06);
  max-width: 78%;
  align-self: flex-end;
  font-size: 0.95rem;
}

.message-assistant {
  background: var(--cream-bg-2);
  border-left: 4px solid var(--gold-1);
  border-radius: 16px;
  padding: 12px 16px;
  margin: 6px 0;
  box-shadow: 0 1px 6px rgba(0,0,0,0.06);
  max-width: 78%;
  align-self: flex-start;
  font-size: 0.96rem;
  line-height: 1.45rem;
}

/* Streaming shimmer */
.message-assistant.streaming {
  position: relative;
  overflow: hidden;
}
.message-assistant.streaming::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.45) 50%,
    rgba(255,255,255,0) 100%
  );
  transform: translateX(-120%);
  animation: shimmer 1.5s infinite;
}

/* ===== Input + Button Alignment (the main fix) ===== */
.input-pill {
  border-radius: 9999px;
  height: 56px;
  display: flex;
  align-items: center;
  padding-left: 1.1rem;
  padding-right: 4.8rem; /* ensures text never hides */
  background: #fff;
  border: 1px solid var(--gold-1);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  position: relative;
}

.input-pill input {
  width: 100%;
  border: none !important;
  background: transparent !important;
  padding-right: 0 !important;
  font-size: 1rem;
  color: var(--text-maroon);
}
.input-pill input:focus {
  outline: none;
  box-shadow: none;
}

/* ===== Send / Stop Button (fully fixed alignment) ===== */
.button-icon {
  position: absolute !important;
  right: 1.2rem;
  top: 50%;
  transform: translateY(-50%);
  width: 42px;
  height: 42px;
  border-radius: 999px;
  background: linear-gradient(180deg, var(--gold-1), var(--gold-2));
  color: white !important;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none !important;
  box-shadow: 0 4px 12px rgba(200,150,60,0.3);
  z-index: 20;
}

.button-icon svg {
  stroke: white !important;
  fill: white !important;
}

.button-icon:hover {
  transform: translateY(-50%) scale(1.05);
}

.button-icon.stream-stop {
  background: linear-gradient(180deg, #aa3c3c, #882626);
  box-shadow: 0 4px 12px rgba(140,40,40,0.3);
}

/* Disabled state */
.button-icon:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  transform: translateY(-50%);
}

/* ===== Placeholder ===== */
::placeholder {
  color: rgba(90, 36, 36, 0.45);
}

/* ===== Footer ===== */
.footer-small {
  text-align: center;
  font-size: 0.78rem;
  color: rgba(90, 36, 36, 0.65);
}

/* ===== Animations ===== */
@keyframes shimmer {
  0% { transform: translateX(-120%); }
  60% { transform: translateX(120%); }
  100% { transform: translateX(120%); }
}

/* ===== Responsive ===== */
@media (max-width: 640px) {
  .input-pill {
    padding-right: 4.2rem;
  }
  .button-icon {
    width: 38px;
    height: 38px;
    right: 0.9rem;
  }
}
